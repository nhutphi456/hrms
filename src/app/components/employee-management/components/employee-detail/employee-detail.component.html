<form [formGroup]="profileForm" (ngSubmit)="onUpdateEmployee()">
    <div class="flex gap-4 lg:p-4 md:p-0">
        <div class="left lg:w-3/12 md:w-5/12">
            <div class="w-full rounded overflow-hidden shadow-md">
                <div class="background-cover-img relative">
                    <img class="w-full" src="https://v1.tailwindcss.com/img/card-top.jpg" alt="Sunset in the mountains">
                    <div class="profile-img relative">
                        <div *ngIf="!tempImg" class="profile-image-container">
                            <img style="background: #CDE9EAFF; border-radius: 60px;" class="w-full"
                                src="assets/images/avatar-default.jpg" alt="" />
                        </div>
                        <p-avatar *ngIf="tempImg" [image]="tempImg" shape="circle" size="xlarge"></p-avatar>
                        <p-fileUpload #fileUpload *ngIf="isEditOn" mode="basic" chooseIcon="pi pi-pencil"
                            (onSelect)="onUpload($event.currentFiles[0])" [auto]="true"></p-fileUpload>
                    </div>
                </div>
                <div class="p-4 mt-16">
                    <div class="font-bold text-xl text-center">{{employee.firstName}} {{employee.lastName}}</div>
                    <p *ngIf="!isEditOn; else positionSelect" class="text-center">{{employee.position}}</p>
                    <ng-template #positionSelect>
                        <p-dropdown styleClass="w-full" formControlName="position" [options]="positionOptions"
                            optionLabel="label"></p-dropdown>
                    </ng-template>
                    <div class="mt-5">
                        <p *ngIf="!isEditOn; else bioInput" class="text-gray-700 text-base text-center">
                            {{employee.bio}}
                        </p>
                        <ng-template #bioInput>
                            <textarea class="w-full" rows="5" cols="30" pInputTextarea formControlName="bio"></textarea>
                        </ng-template>
                    </div>
                    <div class="social-icons mt-5 flex justify-center gap-10">
                        <i class="pi pi-twitter"></i>
                        <i class="pi pi-linkedin"></i>
                        <i class="pi pi-facebook"></i>
                        <i class="pi pi-instagram"></i>
                    </div>
                </div>
                <div class="p-4 pb-8">
                    <div class="flex gap-4 justify-between items-center">
                        <p class="label">Reporting to</p>
                        <p *ngIf="!isEditOn; else managerSelect">{{employee.manager}}</p>
                        <ng-template #managerSelect>
                            <p-dropdown styleClass="w-full" class="w-full flex-1" formControlName="manager"
                                [options]="managerOptions" optionLabel="label" appendTo="managerSelect"></p-dropdown>
                        </ng-template>
                    </div>
                    <div class="flex gap-4 justify-between items-center mt-2">
                        <h1 class="text-md mb-1 font-bold">Skill Tag</h1>
                        <div>
                            <span *ngFor="let skill of employee.skillsTags"
                                class="skill-tag inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20 mr-1">{{skill}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="right lg:w-9/12 md:w-6/12 flex-1">
            <div class="card-container">
                <div class="employee-detail">
                    <div class="flex justify-between items-center mb-4">
                        <h1 class="text-xl font-bold">Employee Detail</h1>
                        <p-button *ngIf="!isEditOn; else groupButtons" (click)="openEdit()" icon="pi pi-pencil"
                            styleClass="p-button-link"> </p-button>
                        <ng-template #groupButtons>
                            <div>
                                <p-button (click)="closeEdit()" styleClass="p-button-link" label="Cancel"> </p-button>
                                <p-button type="submit" label="Save" icon="pi pi-save"> </p-button>
                            </div>
                        </ng-template>
                    </div>
                    <div class="grid lg:grid-cols-3 md:grid-cols-2 gap-5 justify-between mt-3">
                        <div class="info-field">
                            <p class="label">First Name</p>
                            <p *ngIf="!isEditOn; else firstNameInput">{{employee.firstName}}</p>
                            <ng-template #firstNameInput><input formControlName="firstName" type="text"
                                    pInputText /></ng-template>
                        </div>
                        <div class="info-field">
                            <p class="label">Last Name</p>
                            <p *ngIf="!isEditOn; else lastNameInput">{{employee.lastName}}</p>
                            <ng-template #lastNameInput><input formControlName="lastName" type="text"
                                    pInputText /></ng-template>
                        </div>
                        <div class="info-field">
                            <p class="label">Gender</p>
                            <p *ngIf="!isEditOn; else dropdown">{{employee.gender | titlecase}}</p>
                            <ng-template #dropdown>
                                <div class="flex items-center gap-4">
                                    <div class="flex items-center">
                                        <p-radioButton name="gender" value="MALE" id="male"
                                            formControlName="gender"></p-radioButton>

                                        <label for="male" class="ml-2 !text-base">Male</label>
                                    </div>
                                    <div class="flex items-center">
                                        <p-radioButton name="gender" value="FEMALE" id="female"
                                            formControlName="gender"></p-radioButton>

                                        <label for="female" class="ml-2 !text-base">Female</label>
                                    </div>
                                </div>
                            </ng-template>
                        </div>

                        <div class="info-field">
                            <p class="label">Birthday</p>
                            <p *ngIf="!isEditOn; else dateInput">{{employee.dob}}</p>
                            <ng-template #dateInput>
                                <p-calendar class="block w-full" formControlName="dob"></p-calendar>
                            </ng-template>
                        </div>
                        <div class="info-field">
                            <p class="label">Phone</p>
                            <p *ngIf="!isEditOn; else phoneInput">{{employee.phone}} <i class="pi pi-copy"></i></p>
                            <ng-template #phoneInput>
                                <p-inputMask mask="999-999-9999" formControlName="phone" />
                            </ng-template>
                        </div>
                        <div class="info-field">
                            <p class="label">Email</p>
                            <p *ngIf="!isEditOn; else emailInput">{{employee.email}}</p>
                            <ng-template #emailInput><input pInputText formControlName="email" /></ng-template>
                        </div>
                        <div class="info-field col-span-2">
                            <p class="label">Address</p>
                            <p *ngIf="!isEditOn; else addressInput">{{employee.address}} <i class="pi pi-copy"></i></p>
                            <ng-template #addressInput><input pInputText formControlName="address" /></ng-template>
                        </div>
                    </div>
                </div>
                <div *ngIf="isEditOn">
                    <h1 class="text-xl mt-10 mb-1 font-bold">Social Media</h1>
                    <div class="grid grid-cols-2 gap-4">
                        <span class="p-input-icon-left">
                            <i class="pi pi-twitter"></i>
                            <input type="text" pInputText placeholder="Enter your twitter account" />
                        </span>
                        <span class="p-input-icon-left">
                            <i class="pi pi-facebook"></i>
                            <input type="text" pInputText placeholder="Enter your facebook account" />
                        </span><span class="p-input-icon-left">
                            <i class="pi pi-linkedin"></i>
                            <input type="text" pInputText placeholder="Enter your linkedin account" />
                        </span><span class="p-input-icon-left">
                            <i class="pi pi-github"></i>
                            <input type="text" pInputText placeholder="Enter your github account" />
                        </span>
                    </div>
                </div>
                <div class="joined-projects">
                    <h1 class="text-xl mt-10 mb-1 font-bold">Joined Projects</h1>
                    <div class="card">
                        <p-table [value]="employee.joinedProjects" [tableStyle]="{ 'min-width': '50rem' }"
                            styleClass="p-datatable-gridlines">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Name</th>
                                    <th>Work as</th>
                                    <th>Skill Tags</th>
                                    <th>Contributed Hours</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-project>
                                <tr>
                                    <td>{{ project.name }}</td>
                                    <td>{{ project.workAs }}</td>
                                    <td>
                                        <span *ngFor="let skill of project.skillTags"
                                            class="skill-tag inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20 mr-1">{{skill}}</span>
                                    </td>
                                    <td>{{ project.contributedHours }}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
                <div class="emergency-contact">
                    <h1 class="text-xl mt-10 mb-1 font-bold">Emergency Contacts</h1>
                    <div class="card">
                        <p-table [value]="employee.emergencyContacts" [tableStyle]="{ 'min-width': '50rem' }"
                            styleClass="p-datatable-gridlines">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Phone</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-contact>
                                <tr>
                                    <td>{{ contact.firstName }}</td>
                                    <td>{{ contact.lastName }}</td>
                                    <td>
                                        {{contact.phone}} <i class="pi pi-copy"></i>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>